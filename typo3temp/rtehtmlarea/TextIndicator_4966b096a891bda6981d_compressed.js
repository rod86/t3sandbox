HTMLArea.TextIndicator=HTMLArea.Plugin.extend({constructor:function(editor,pluginName){this.base(editor,pluginName);},configurePlugin:function(editor){var pluginInformation={version:"1.0",developer:"Stanislas Rolland",developerUrl:"http://www.sjbr.ca/",copyrightOwner:"Stanislas Rolland",sponsor:"SJBR",sponsorUrl:"http://www.sjbr.ca/",license:"GPL"};this.registerPluginInformation(pluginInformation);var buttonId='TextIndicator';var textConfiguration={id:buttonId,cls:'indicator',text:'A',tooltip:this.localize(buttonId.toLowerCase())};this.registerText(textConfiguration);return true;},onUpdateToolbar:function(button,mode,selectionEmpty,ancestors){var editor=this.editor;if(mode==='wysiwyg'&&editor.isEditable()){var doc=editor._doc;try{var style={backgroundColor:HTMLArea._makeColor(doc.queryCommandValue((Ext.isIE||Ext.isWebKit)?'BackColor':'HiliteColor')),color:HTMLArea._makeColor(doc.queryCommandValue('ForeColor')),fontFamily:doc.queryCommandValue('FontName'),fontWeight:'normal',fontStyle:'normal'};if(/transparent/i.test(style.backgroundColor)){style.backgroundColor=HTMLArea._makeColor(doc.queryCommandValue('BackColor'));}
try{style.fontWeight=doc.queryCommandState('Bold')?'bold':'normal';}catch(e){style.fontWeight='normal';}
try{style.fontStyle=doc.queryCommandState('Italic')?'italic':'normal';}catch(e){style.fontStyle='normal';}
button.getEl().setStyle(style);}catch(e){}}}});